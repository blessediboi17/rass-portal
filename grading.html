<div id="login-section" style="background: #eef2f7; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
    <h3>Teacher Login</h3>
    <p>Please enter your Teacher Access Code to manage your students.</p>
    <input type="password" id="teacher-code" placeholder="Enter Teacher ID" style="width: 200px; margin-right: 10px;">
    <button class="btn" onclick="loginTeacher()" style="width: auto; padding: 10px 20px;">Load My Students</button>
</div>

<div id="main-portal" style="display:none;">
    <h4 id="welcome-msg"></h4>
    ...
</div>

<script>
let currentTeacherID = "";

function loginTeacher() {
    const code = document.getElementById('teacher-code').value;
    if (code.length < 3) {
        alert("Please enter a valid Teacher ID");
        return;
    }
    currentTeacherID = code;
    document.getElementById('login-section').style.display = "none";
    document.getElementById('main-portal').style.display = "block";
    document.getElementById('welcome-msg').innerText = "Logged in as Teacher: " + currentTeacherID;
}

// UPDATE YOUR SAVE FUNCTION TO INCLUDE THE TEACHER ID
async function saveData() {
    const n = document.getElementById('s_name').value.trim();
    const c = document.getElementById('s_class').value;
    // ... (rest of your variables)

    const { error } = await _sb.from('grades').insert([{ 
        student_name: n, 
        academic_year: y, 
        student_class: c, 
        teacher_remarks: rem, 
        scores: scores,
        teacher_id: currentTeacherID // THIS LINKS THE STUDENT TO THIS TEACHER
    }]);
    
    // ... (rest of your success logic)
}
</script>
